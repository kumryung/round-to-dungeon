# Round the Dungeon - Session Handoff

이 문서는 다음 세션에서 개발을 매끄럽게 이어나가기 위해 현재까지의 개발 상태와 최근 변경 사항을 요약한 핸드오프 문서입니다.

## 1. 프로젝트 주요 기능 현황 (Current State)
*   **다국어 시스템 (i18n)**: 한국어, 영어, 일본어 100% 동기화 및 텍스트 분리 완료 (정적 텍스트, 맵, 이벤트, 스킬, 몬스터, 아이템, 로그 등).
*   **마을 시스템 (Town)**: 성, 방랑자 관리, 길드 영입, 창고 보관/정렬, 상점(소모품/장비/가챠), 대장간 크래프팅, 우편함 시스템 완비.
*   **던전 탐험 (Dungeon)**: 주사위 기반 이동, 타일 이벤트 상호작용, 아이템 파밍 로직 완비.
*   **전투 시스템 (Combat)**: 캐릭터와 몬스터의 속도(`spd`) 스탯 기반의 **ATB(Active Time Battle)** 턴제 전투 로직 및 시각화 게이지 완비.
*   **심화 게임플레이 시스템**:
    *   **정신력(Sanity) 시스템**: 5단계 티어에 따른 동적 전투 스탯 페널티/버프 부여.
    *   **장비 요구조건 (Equip Reqs)**: 클래스 제한 및 스탯 요구치 시스템 방어 로직 완비.
    *   **상태이상 (Statuses)**: 화상, 독, 출혈, 재생, 축복, 저주 등 턴 지속 도트/버프 효과 완비.
    *   **무게 (Weight) 시스템**: 소지품 무게 합산값과 캐릭터 한도(STR 비례)를 비교해 이동 주사위 최대값을 제한하고 인벤토리에 UI 시각화.

## 2. 최근 세션에서 개발된 사항 (Recent Developments)
1.  **맵(Map) 데이터 로컬라이제이션 동기화**: `maps.js`에 하드코딩 되어있던 수십 개의 맵 설명(`desc`) 텍스트들을 `ko.js`, `en.js`, `ja.js` 로 일괄 추출 및 구조화 동기화 완료. 불필요해진 `nameEn` 필드 완전 제거.
2.  **사운드 및 VFX 엔진 구현**: `soundEngine.js`와 `vfxEngine.js`를 신설하여 UI 조작, 주사위 굴림, 몹/상자/이벤트 타일 스폰, 전투 타격/회피 등 전반적인 게임플레이에 8비트 오실레이터 효과음 및 화면 흔들림 연출 추가. 오디오 웜업(Warm-up) 로직으로 첫 재생 지연(Lag) 개선.
3.  **환경 설정 (사운드 제어)**: 설정 탭에서 볼륨 조절 및 음소거 기능을 추가하고, 데이터 (`globalVolume`, `isMuted`)를 게임 저장 데이터(`gameState.js`)에 연동하여 재접속 시에도 유지되도록 구현.
4.  **치명적 버그 수정 및 다국어 보완**: 
    *   던전 진입 후 이동(Move) 페이즈에서 강제 새로고침 시 스폰 모션이 재실행되어 타일 오브젝트가 중복 생성되는 버그 수정 (`startSpawnPhase` 직후 상태 저장 추가 및 `ds.phase === 'move'` 방어 로직 추가).
    *   정신력(Sanity) 상태 UI 텍스트가 번역 누락으로 `dungeon_ui.sanity_stable` 형태의 코드로 출력되는 현상 발견 및 한/영/일 다국어 텍스트 패치 완료.

## 3. 다음 세션 권장 작업 (Next Steps)
*   **밸런스 조정**: 새롭게 추가된 무게 시스템과 정신력 페널티가 초반 플레이에 과도한 제약을 주는지 테스트 및 스탯 요구량 조정 필요.
*   **신규 컨텐츠 추가**: 아이템 크래프팅 상위 레시피 추가 및 최종 보스/신규 웨이브 몬스터 패턴 기획 구체화.

이 문서를 바탕으로 다음 개발 세션을 시작하세요!
